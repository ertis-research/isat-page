{{/* Partial: Galería de Actuaciones */}}
{{ $sec := . }}
{{ if $sec }}
<section class="py-24 bg-white">
  <div class="container mx-auto px-6 max-w-6xl">
    <h2 class="text-3xl font-bold text-gray-900 mb-10 text-center">{{ $sec.content.title }}</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 gallery-grid">
      {{ range $sec.content.items }}
      <div class="gallery-item rounded-xl bg-gray-100 aspect-video group cursor-pointer shadow-sm landing-gallery-item">
        {{ if .image }}
          {{ $imgURL := .image }}
          {{ if not (hasPrefix .image "http") }}
            {{/* Limpiar rutas para buscar en assets */}}
            {{ $cleanPath := replaceRE "^/?(assets/|static/)" "" .image }}
            
            {{/* Intentar encontrar el recurso en assets */}}
            {{ $res := resources.Get $cleanPath }}
            
            {{/* Si no se encuentra, intentar buscar asumiendo que está en media/ si no se especificó */}}
            {{ if not $res }}
               {{ $res = resources.Get (path.Join "media" $cleanPath) }}
            {{ end }}

            {{ if $res }}
              {{ $imgURL = $res.RelPermalink }}
            {{ end }}
          {{ end }}
          <img src="{{ $imgURL }}" alt="{{ .title }}" class="w-full h-full object-cover">
        {{ end }}
        <div class="gallery-overlay absolute inset-0 flex flex-col justify-end p-6 landing-gallery-overlay">
          <span class="text-white font-bold text-lg">{{ .title }}</span>
          {{ with .caption }}<span class="text-gray-200 text-sm">{{ . }}</span>{{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
